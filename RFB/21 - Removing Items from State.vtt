WEBVTT

1
00:00:00.621 --> 00:00:03.288
(playful music)

2
00:00:06.430 --> 00:00:07.660
<v Instructor>So, if you've ever heard</v>

3
00:00:07.660 --> 00:00:10.130
of the CRUD acronym before it stands

4
00:00:10.130 --> 00:00:12.030
for create, read, update, and delete

5
00:00:12.030 --> 00:00:14.500
and we've pretty much done all of that already.

6
00:00:14.500 --> 00:00:16.620
We've have the ability to create a fish.

7
00:00:16.620 --> 00:00:17.910
We have the ability to read a fish.

8
00:00:17.910 --> 00:00:19.480
We're reading it into here.

9
00:00:19.480 --> 00:00:23.400
We have the ability to update a fish by typing into here,

10
00:00:23.400 --> 00:00:26.330
but we don't have the ability to delete any of our items.

11
00:00:26.330 --> 00:00:28.650
So, in this video, we're gonna go over deleting items

12
00:00:28.650 --> 00:00:32.210
from our inventory as well as deleting items from our order.

13
00:00:32.210 --> 00:00:34.790
So, let's go ahead and open up App.js

14
00:00:34.790 --> 00:00:37.190
'cause that's where our deleting is going to happen

15
00:00:37.190 --> 00:00:39.150
and let's start with the actual

16
00:00:39.150 --> 00:00:41.550
creating a delete fish function.

17
00:00:41.550 --> 00:00:44.420
So, right below update fish, we'll say deleteFish

18
00:00:45.860 --> 00:00:47.740
and that is going to take a key

19
00:00:47.740 --> 00:00:49.820
for which fish we would like to delete

20
00:00:49.820 --> 00:00:53.500
and from there it's pretty simple in what we're going to do.

21
00:00:53.500 --> 00:00:55.487
So, first thing we're gonna do is,

22
00:00:55.487 --> 00:00:57.470
one, and you're gonna get really good

23
00:00:57.470 --> 00:00:58.930
at this whole updating state.

24
00:00:58.930 --> 00:01:01.090
So, take a copy of state.

25
00:01:03.950 --> 00:01:07.491
So, it's a const fishes is equal to

26
00:01:07.491 --> 00:01:10.480
...this.state.fishes.

27
00:01:10.480 --> 00:01:13.130
Then, we are going to, two, update the state.

28
00:01:13.130 --> 00:01:17.330
In our case here, we are going to remove an item from state.

29
00:01:17.330 --> 00:01:20.762
So, if this was an array, all I would do is,

30
00:01:20.762 --> 00:01:23.140
I would just filter.

31
00:01:23.140 --> 00:01:24.370
I would do something like this,

32
00:01:24.370 --> 00:01:25.280
do it in one go.

33
00:01:25.280 --> 00:01:28.650
I would just say, like, this.state.fishes.filter

34
00:01:28.650 --> 00:01:30.390
and then just return the new,

35
00:01:30.390 --> 00:01:32.210
the amount of fishes that I want.

36
00:01:32.210 --> 00:01:34.997
But, because it's an object, we first take a copy of it

37
00:01:34.997 --> 00:01:38.140
and then we are going to set the fish

38
00:01:38.140 --> 00:01:40.150
that we don't want to null

39
00:01:40.150 --> 00:01:42.050
and initially, I thought, like okay,

40
00:01:42.050 --> 00:01:45.411
we just could delete, like, fishes.fish1.

41
00:01:45.411 --> 00:01:47.130
However, there's a little bit of a weird thing

42
00:01:47.130 --> 00:01:49.240
with Firebase where if you want Firebase

43
00:01:49.240 --> 00:01:51.930
to also remove it, you have to set it to null.

44
00:01:51.930 --> 00:01:53.570
So, what we're gonna do is we're gonna say

45
00:01:53.570 --> 00:01:55.430
fishes[Key].

46
00:01:55.430 --> 00:01:57.810
So, it's like kind of like fishes.fish1,

47
00:01:57.810 --> 00:02:00.350
fishes.fish2 is equal to null.

48
00:02:00.350 --> 00:02:03.340
And then three, we're just going to update state.

49
00:02:03.340 --> 00:02:05.020
So, this.setState

50
00:02:07.470 --> 00:02:09.310
fishes.

51
00:02:09.310 --> 00:02:11.640
It's kind of interesting that it's almost exactly the same

52
00:02:11.640 --> 00:02:13.520
as our update fish except that

53
00:02:13.520 --> 00:02:15.840
in this case we are just setting it to null

54
00:02:15.840 --> 00:02:18.840
rather than updating and overriding a fish.

55
00:02:18.840 --> 00:02:20.191
So, that's good.

56
00:02:20.191 --> 00:02:21.120
Let's actually try to manually do it.

57
00:02:21.120 --> 00:02:23.920
I'll go into our reactive tools.

58
00:02:23.920 --> 00:02:25.200
We'll find app

59
00:02:26.860 --> 00:02:28.900
and we will use a $R.

60
00:02:31.135 --> 00:02:34.879
So, $R.

61
00:02:34.879 --> 00:02:35.980
deleteFish,

62
00:02:35.980 --> 00:02:36.813
there it is.

63
00:02:36.813 --> 00:02:38.510
And, let's just try delete fish one.

64
00:02:39.470 --> 00:02:40.303
Boom.

65
00:02:40.303 --> 00:02:41.136
Removed it.

66
00:02:41.136 --> 00:02:41.969
Let's try

67
00:02:43.090 --> 00:02:44.150
delete, what is it,

68
00:02:44.150 --> 00:02:45.190
fish two.

69
00:02:45.190 --> 00:02:47.778
So, let's try delete fish two.

70
00:02:47.778 --> 00:02:48.910
Boom.

71
00:02:48.910 --> 00:02:50.570
Actually takes it, removes it

72
00:02:50.570 --> 00:02:52.576
from the order entirely which is great.

73
00:02:52.576 --> 00:02:55.930
And now we need to hook that up to a button,

74
00:02:55.930 --> 00:03:00.930
so we're going to go to our edit fish form

75
00:03:01.570 --> 00:03:03.690
and we're going to go all the way to the bottom

76
00:03:03.690 --> 00:03:07.750
and just add a button here that says remove fish.

77
00:03:07.750 --> 00:03:08.720
Good.

78
00:03:08.720 --> 00:03:12.757
And, now we need to somehow get that delete fish function

79
00:03:12.757 --> 00:03:15.520
to, downstream to the edit fish form

80
00:03:15.520 --> 00:03:17.030
and it's gonna work exactly the same

81
00:03:17.030 --> 00:03:18.370
as the rest of them did.

82
00:03:18.370 --> 00:03:19.560
So, this is in our inventory.

83
00:03:19.560 --> 00:03:23.270
We have add fish, update fish, and now we have delete fish.

84
00:03:26.280 --> 00:03:27.870
And then we're gonna go into our inventory

85
00:03:27.870 --> 00:03:31.000
and pass it down one more level deeper.

86
00:03:31.000 --> 00:03:32.580
Delete fish.

87
00:03:33.430 --> 00:03:36.750
And then, when somebody clicks it, we can go here.

88
00:03:36.750 --> 00:03:39.830
We can say onClick equals

89
00:03:39.830 --> 00:03:42.587
and now here's where you're like it's a bit

90
00:03:42.587 --> 00:03:44.310
of a different than what we've had so far

91
00:03:44.310 --> 00:03:49.310
like do we need to have a, another function right here

92
00:03:49.890 --> 00:03:51.440
that we create that just deletes it

93
00:03:51.440 --> 00:03:52.700
or can we do it in line

94
00:03:52.700 --> 00:03:54.380
and the answer is that we can actually just do

95
00:03:54.380 --> 00:03:56.254
an inline function here using an arrow

96
00:03:56.254 --> 00:03:59.360
and we say this.props.deleteFish

97
00:04:01.960 --> 00:04:03.810
and we'll pass it the key

98
00:04:03.810 --> 00:04:05.670
and the key, where's the key?

99
00:04:06.540 --> 00:04:08.926
The key is passed in, I believe,

100
00:04:08.926 --> 00:04:11.210
let's look back.

101
00:04:11.210 --> 00:04:13.640
Passing it in as an index so,

102
00:04:13.640 --> 00:04:16.730
we'll say this.props.index.

103
00:04:18.210 --> 00:04:20.009
Oh, does that work?

104
00:04:20.009 --> 00:04:21.170
Boom.

105
00:04:21.170 --> 00:04:22.300
Boom, boom, boom.

106
00:04:22.300 --> 00:04:23.350
Boom, boom.

107
00:04:23.350 --> 00:04:24.819
Remove it.

108
00:04:24.819 --> 00:04:25.917
It could load a bunch more.

109
00:04:25.917 --> 00:04:26.750
Boom, boom, boom, boom, boom, boom, boom.

110
00:04:26.750 --> 00:04:28.080
Deleting it, really nice.

111
00:04:28.080 --> 00:04:32.530
So, that's all it is to remove an item from state.

112
00:04:32.530 --> 00:04:36.126
Now, we actually need to hook up a remove button

113
00:04:36.126 --> 00:04:38.943
so that when we have something in our order

114
00:04:38.943 --> 00:04:41.150
we're able to delete it.

115
00:04:41.150 --> 00:04:42.560
So, I wanna challenge you right now.

116
00:04:42.560 --> 00:04:44.350
Maybe pause the video and try

117
00:04:44.350 --> 00:04:46.210
to do this little piece on your own

118
00:04:46.210 --> 00:04:49.021
because it's almost exactly the same as deleting the fish,

119
00:04:49.021 --> 00:04:51.490
but we are going to create another method

120
00:04:51.490 --> 00:04:53.210
that deletes something from order.

121
00:04:53.210 --> 00:04:55.040
So, if you feel like you're comfortable enough

122
00:04:55.040 --> 00:04:56.670
with this stuff right now, go ahead and pause it

123
00:04:56.670 --> 00:04:57.600
and try it yourself.

124
00:04:57.600 --> 00:04:59.770
Otherwise, let's go along for the ride.

125
00:04:59.770 --> 00:05:01.370
So, I'm gonna go back to App.js.

126
00:05:03.550 --> 00:05:05.530
And, right below add to order,

127
00:05:05.530 --> 00:05:08.060
we're going to make a removeFromOrder

128
00:05:09.017 --> 00:05:10.960
and that's going to take in a key.

129
00:05:12.300 --> 00:05:14.840
And, we're simply going to (laughs),

130
00:05:14.840 --> 00:05:16.097
let's just copy this.

131
00:05:16.097 --> 00:05:17.928
It's super simple.

132
00:05:17.928 --> 00:05:19.540
Very much the same.

133
00:05:19.540 --> 00:05:22.250
So take a copy of state, either add to,

134
00:05:22.250 --> 00:05:23.083
or I would change that one.

135
00:05:23.083 --> 00:05:26.100
So, it would say remove that item from order.

136
00:05:27.890 --> 00:05:30.840
And, in this case, we simply say order key is equal

137
00:05:30.840 --> 00:05:33.740
to null, or, sorry, actually that's wrong

138
00:05:33.740 --> 00:05:36.340
because in this case since we're not mirroring

139
00:05:36.340 --> 00:05:38.750
to Firebase, we can use delete.

140
00:05:38.750 --> 00:05:40.379
And we can delete the order key.

141
00:05:40.379 --> 00:05:45.379
And then, finally, we reinstate it back into state.

142
00:05:45.630 --> 00:05:46.910
So, that's good.

143
00:05:46.910 --> 00:05:51.020
Let's add some lobster which we know is fish two

144
00:05:51.020 --> 00:05:54.150
and let's try to manually call that ourselves.

145
00:05:54.150 --> 00:05:55.010
Go to react,

146
00:05:56.150 --> 00:05:58.470
under App, click on it.

147
00:05:58.470 --> 00:05:59.600
Now, let's see.

148
00:05:59.600 --> 00:06:00.550
$r.removeFromOrder,

149
00:06:02.117 --> 00:06:02.950
fish2,

150
00:06:04.560 --> 00:06:05.393
boom.

151
00:06:05.393 --> 00:06:06.530
It removed it from order.

152
00:06:06.530 --> 00:06:09.510
Didn't touch it in any other ones that we have.

153
00:06:09.510 --> 00:06:10.343
Good.

154
00:06:10.343 --> 00:06:12.480
So, we can take this remove from order,

155
00:06:12.480 --> 00:06:14.420
pass it down to our order,

156
00:06:15.620 --> 00:06:18.100
removeFromOrder is equal to

157
00:06:18.100 --> 00:06:20.900
this.removeFromOrder.

158
00:06:20.900 --> 00:06:21.733
Good.

159
00:06:21.733 --> 00:06:23.560
And we'll go to our order component,

160
00:06:23.560 --> 00:06:25.770
is we're going to put a button

161
00:06:26.750 --> 00:06:27.870
that has,

162
00:06:28.980 --> 00:06:32.350
I always like to use the &amp;times,

163
00:06:32.350 --> 00:06:33.370
say onClick,

164
00:06:34.760 --> 00:06:35.593
equals,

165
00:06:37.610 --> 00:06:40.560
and we can do just a little arrow function here,

166
00:06:40.560 --> 00:06:45.560
this.props.removeFromOrder and pass the key.

167
00:06:46.340 --> 00:06:47.173
Good.

168
00:06:47.173 --> 00:06:48.395
Go back here.

169
00:06:48.395 --> 00:06:49.392
Now, when you hover over top,

170
00:06:49.392 --> 00:06:50.420
you should see these little X buttons

171
00:06:50.420 --> 00:06:51.253
and you click on it.

172
00:06:51.253 --> 00:06:54.340
It should remove that specific item from the order

173
00:06:54.340 --> 00:06:56.759
and our order state will then be updated.

174
00:06:56.759 --> 00:06:57.680
Great.

175
00:06:57.680 --> 00:06:58.610
In the next video, we're gonna learn

176
00:06:58.610 --> 00:07:01.220
about how we can actually animate these things

177
00:07:01.220 --> 00:07:03.200
so that when you add them to your order

178
00:07:03.200 --> 00:07:05.130
and when you increment the number

179
00:07:05.130 --> 00:07:06.530
and when you remove them from the order

180
00:07:06.530 --> 00:07:08.930
we all get this nice UI interface.

